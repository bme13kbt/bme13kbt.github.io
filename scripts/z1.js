!function(){var m=window.MutationObserver||window.WebKitMutationObserver,E="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,T=void 0!==document.documentElement.style["touch-action"]||document.documentElement.style["-ms-touch-action"];if(!T&&E&&m){window.Hammer=window.Hammer||{};var A=/touch-action[:][\s]*(none)[^;'"]*/,S=/touch-action[:][\s]*(manipulation)[^;'"]*/,O=/touch-action/,N=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),L=function(){try{var C=document.createElement("canvas");return window.WebGLRenderingContext&&(C.getContext("webgl")||C.getContext("experimental-webgl"))}catch(D){return!1}}(),M=L&&N;window.Hammer.time={getTouchAction:function(C){return this.checkStyleString(C.getAttribute("style"))},checkStyleString:function(C){return O.test(C)?A.test(C)?"none":!S.test(C)||"manipulation":void 0},shouldHammer:function(C){var D=this.hasParent(C.target);return D&&(!M||125>Date.now()-C.target.lastStart)&&D},touchHandler:function(C){var D=C.target.getBoundingClientRect(),z=D.top!==this.pos.top||D.left!==this.pos.left,F=this.shouldHammer(C);("none"===F||!1==z&&"manipulation"===F)&&("touchend"===C.type&&(C.target.focus(),setTimeout(function(){C.target.click()},0)),C.preventDefault()),this.scrolled=!1,delete C.target.lastStart},touchStart:function(C){this.pos=C.target.getBoundingClientRect(),M&&this.hasParent(C.target)&&(C.target.lastStart=Date.now())},styleWatcher:function(C){C.forEach(this.styleUpdater,this)},styleUpdater:function(C){if(C.target.updateNext)return void(C.target.updateNext=!1);var D=this.getTouchAction(C.target);return D?void("none"!==D&&(C.target.hadTouchNone=!1)):void(!D&&(C.oldValue&&this.checkStyleString(C.oldValue)||C.target.hadTouchNone)&&(C.target.hadTouchNone=!0,C.target.updateNext=!1,C.target.setAttribute("style",C.target.getAttribute("style")+" touch-action: none;")))},hasParent:function(C){for(var D,z=C;z&&z.parentNode;z=z.parentNode)if(D=this.getTouchAction(z))return D;return!1},installStartEvents:function(){document.addEventListener("touchstart",this.touchStart.bind(this)),document.addEventListener("mousedown",this.touchStart.bind(this))},installEndEvents:function(){document.addEventListener("touchend",this.touchHandler.bind(this),!0),document.addEventListener("mouseup",this.touchHandler.bind(this),!0)},installObserver:function(){this.observer=new m(this.styleWatcher.bind(this)).observe(document,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})},install:function(){this.installEndEvents(),this.installStartEvents(),this.installObserver()}},window.Hammer.time.install()}}();(function(m,E,T,A){"use strict";function S(Qt,Jt,$t){return setTimeout(C(Qt,$t),Jt)}function O(Qt,Jt,$t){return!!Array.isArray(Qt)&&(N(Qt,$t[Jt],$t),!0)}function N(Qt,Jt,$t){if(Qt)if(Qt.forEach)Qt.forEach(Jt,$t);else if(Qt.length!==A)for(en=0;en<Qt.length;)Jt.call($t,Qt[en],en,Qt),en++;else for(var en in Qt)Qt.hasOwnProperty(en)&&Jt.call($t,Qt[en],en,Qt)}function L(Qt,Jt,$t){return function(){var tn=new Error("get-stack-trace"),nn=tn&&tn.stack?tn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",on=m.console&&(m.console.warn||m.console.log);return on&&on.call(m.console,"DEPRECATED METHOD: "+Jt+"\n"+$t+" AT \n",nn),Qt.apply(this,arguments)}}function M(Qt,Jt,$t){var tn,en=Jt.prototype;tn=Qt.prototype=Object.create(en),tn.constructor=Qt,tn._super=en,$t&&Ue(tn,$t)}function C(Qt,Jt){return function(){return Qt.apply(Jt,arguments)}}function D(Qt,Jt){return typeof Qt=="function"?Qt.apply(Jt?Jt[0]||A:A,Jt):Qt}function z(Qt,Jt){return Qt===A?Jt:Qt}function F(Qt,Jt,$t){N(V(Jt),function(en){Qt.addEventListener(en,$t,!1)})}function R(Qt,Jt,$t){N(V(Jt),function(en){Qt.removeEventListener(en,$t,!1)})}function H(Qt,Jt){for(;Qt;){if(Qt==Jt)return!0;Qt=Qt.parentNode}return!1}function W(Qt,Jt){return-1<Qt.indexOf(Jt)}function V(Qt){return Qt.trim().split(/\s+/g)}function U(Qt,Jt,$t){if(Qt.indexOf&&!$t)return Qt.indexOf(Jt);for(var en=0;en<Qt.length;){if($t&&Qt[en][$t]==Jt||!$t&&Qt[en]===Jt)return en;en++}return-1}function G(Qt){return Array.prototype.slice.call(Qt,0)}function k(Qt,Jt,$t){for(var on,en=[],tn=[],nn=0;nn<Qt.length;)on=Jt?Qt[nn][Jt]:Qt[nn],0>U(tn,on)&&en.push(Qt[nn]),tn[nn]=on,nn++;return $t&&(Jt?en=en.sort(function(rn,sn){return rn[Jt]>sn[Jt]}):en=en.sort()),en}function X(Qt,Jt){for(var $t,en,tn=Jt[0].toUpperCase()+Jt.slice(1),nn=0;nn<Fe.length;){if($t=Fe[nn],en=$t?$t+tn:Jt,en in Qt)return en;nn++}return A}function Y(){return Xe++}function Z(Qt){var Jt=Qt.ownerDocument||Qt;return Jt.defaultView||Jt.parentWindow||m}function q(Qt,Jt){var $t=this;this.manager=Qt,this.callback=Jt,this.element=Qt.element,this.target=Qt.options.inputTarget,this.domHandler=function(en){D(Qt.options.enable,[Qt])&&$t.handler(en)},this.init()}function K(Qt){var Jt,$t=Qt.options.inputClass;return Jt=$t?$t:qe?de:Ke?me:Ze?fe:pe,new Jt(Qt,Q)}function Q(Qt,Jt,$t){var en=$t.pointers.length,tn=$t.changedPointers.length,nn=Jt&nt&&0==en-tn;$t.isFirst=!!nn,$t.isFinal=!!(Jt&(at|rt)&&0==en-tn),nn&&(Qt.session={}),$t.eventType=Jt,J(Qt,$t),Qt.emit("hammer.input",$t),Qt.recognize($t),Qt.session.prevInput=$t}function J(Qt,Jt){var $t=Qt.session,en=Jt.pointers,tn=en.length;$t.firstInput||($t.firstInput=te(Jt)),1<tn&&!$t.firstMultiple?$t.firstMultiple=te(Jt):1===tn&&($t.firstMultiple=!1);var nn=$t.firstInput,on=$t.firstMultiple,an=on?on.center:nn.center,rn=Jt.center=ne(en);Jt.timeStamp=Ve(),Jt.deltaTime=Jt.timeStamp-nn.timeStamp,Jt.angle=re(an,rn),Jt.distance=ae(an,rn),$($t,Jt),Jt.offsetDirection=oe(Jt.deltaX,Jt.deltaY);var sn=ie(Jt.deltaTime,Jt.deltaX,Jt.deltaY);Jt.overallVelocityX=sn.x,Jt.overallVelocityY=sn.y,Jt.overallVelocity=je(sn.x)>je(sn.y)?sn.x:sn.y,Jt.scale=on?le(on.pointers,en):1,Jt.rotation=on?se(on.pointers,en):0,Jt.maxPointers=$t.prevInput?Jt.pointers.length>$t.prevInput.maxPointers?Jt.pointers.length:$t.prevInput.maxPointers:Jt.pointers.length,ee($t,Jt);var ln=Qt.element;H(Jt.srcEvent.target,ln)&&(ln=Jt.srcEvent.target),Jt.target=ln}function $(Qt,Jt){var $t=Jt.center,en=Qt.offsetDelta||{},tn=Qt.prevDelta||{},nn=Qt.prevInput||{};(Jt.eventType===nt||nn.eventType===at)&&(tn=Qt.prevDelta={x:nn.deltaX||0,y:nn.deltaY||0},en=Qt.offsetDelta={x:$t.x,y:$t.y}),Jt.deltaX=tn.x+($t.x-en.x),Jt.deltaY=tn.y+($t.y-en.y)}function ee(Qt,Jt){var tn,nn,on,an,$t=Qt.lastInterval||Jt,en=Jt.timeStamp-$t.timeStamp;if(Jt.eventType!=rt&&(en>25||$t.velocity===A)){var rn=Jt.deltaX-$t.deltaX,sn=Jt.deltaY-$t.deltaY,ln=ie(en,rn,sn);nn=ln.x,on=ln.y,tn=je(ln.x)>je(ln.y)?ln.x:ln.y,an=oe(rn,sn),Qt.lastInterval=Jt}else tn=$t.velocity,nn=$t.velocityX,on=$t.velocityY,an=$t.direction;Jt.velocity=tn,Jt.velocityX=nn,Jt.velocityY=on,Jt.direction=an}function te(Qt){for(var Jt=[],$t=0;$t<Qt.pointers.length;)Jt[$t]={clientX:We(Qt.pointers[$t].clientX),clientY:We(Qt.pointers[$t].clientY)},$t++;return{timeStamp:Ve(),pointers:Jt,center:ne(Jt),deltaX:Qt.deltaX,deltaY:Qt.deltaY}}function ne(Qt){var Jt=Qt.length;if(1===Jt)return{x:We(Qt[0].clientX),y:We(Qt[0].clientY)};for(var $t=0,en=0,tn=0;tn<Jt;)$t+=Qt[tn].clientX,en+=Qt[tn].clientY,tn++;return{x:We($t/Jt),y:We(en/Jt)}}function ie(Qt,Jt,$t){return{x:Jt/Qt||0,y:$t/Qt||0}}function oe(Qt,Jt){return Qt===Jt?st:je(Qt)>=je(Jt)?0>Qt?lt:pt:0>Jt?ut:ct}function ae(Qt,Jt,$t){$t||($t=gt);var en=Jt[$t[0]]-Qt[$t[0]],tn=Jt[$t[1]]-Qt[$t[1]];return Math.sqrt(en*en+tn*tn)}function re(Qt,Jt,$t){$t||($t=gt);var en=Jt[$t[0]]-Qt[$t[0]],tn=Jt[$t[1]]-Qt[$t[1]];return 180*Math.atan2(tn,en)/Math.PI}function se(Qt,Jt){return re(Jt[1],Jt[0],yt)+re(Qt[1],Qt[0],yt)}function le(Qt,Jt){return ae(Jt[0],Jt[1],yt)/ae(Qt[0],Qt[1],yt)}function pe(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,q.apply(this,arguments)}function de(){this.evEl=Tt,this.evWin=At,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function ue(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,q.apply(this,arguments)}function ce(Qt,Jt){var $t=G(Qt.touches),en=G(Qt.changedTouches);return Jt&(at|rt)&&($t=k($t.concat(en),"identifier",!0)),[$t,en]}function me(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},q.apply(this,arguments)}function he(Qt,Jt){var $t=G(Qt.touches),en=this.targetIds;if(Jt&(nt|ot)&&1===$t.length)return en[$t[0].identifier]=!0,[$t,$t];var tn,nn,on=G(Qt.changedTouches),an=[],rn=this.target;if(nn=$t.filter(function(sn){return H(sn.target,rn)}),Jt===nt)for(tn=0;tn<nn.length;)en[nn[tn].identifier]=!0,tn++;for(tn=0;tn<on.length;)en[on[tn].identifier]&&an.push(on[tn]),Jt&(at|rt)&&delete en[on[tn].identifier],tn++;return an.length?[k(nn.concat(an),"identifier",!0),an]:void 0}function fe(){q.apply(this,arguments);var Qt=C(this.handler,this);this.touch=new me(this.manager,Qt),this.mouse=new pe(this.manager,Qt),this.primaryTouch=null,this.lastTouches=[]}function ge(Qt,Jt){Qt&nt?(this.primaryTouch=Jt.changedPointers[0].identifier,ye.call(this,Jt)):Qt&(at|rt)&&ye.call(this,Jt)}function ye(Qt){var Jt=Qt.changedPointers[0];if(Jt.identifier===this.primaryTouch){var $t={x:Jt.clientX,y:Jt.clientY};this.lastTouches.push($t);var en=this.lastTouches,tn=function(){var nn=en.indexOf($t);-1<nn&&en.splice(nn,1)};setTimeout(tn,2500)}}function ve(Qt){for(var Jt=Qt.srcEvent.clientX,$t=Qt.srcEvent.clientY,en=0;en<this.lastTouches.length;en++){var tn=this.lastTouches[en],nn=Math.abs(Jt-tn.x),on=Math.abs($t-tn.y);if(nn<=Lt&&on<=Lt)return!0}return!1}function be(Qt,Jt){this.manager=Qt,this.set(Jt)}function xe(Qt){if(W(Qt,Ft))return Ft;var Jt=W(Qt,Rt),$t=W(Qt,Ht);return Jt&&$t?Ft:Jt||$t?Jt?Rt:Ht:W(Qt,zt)?zt:Bt}function _e(Qt){this.options=Ue({},this.defaults,Qt||{}),this.id=Y(),this.manager=null,this.options.enable=z(this.options.enable,!0),this.state=jt,this.simultaneous={},this.requireFail=[]}function Te(Qt){if(Qt&Xt)return"cancel";return Qt&Gt?"end":Qt&Ut?"move":Qt&Vt?"start":""}function Ae(Qt){if(Qt==ct)return"down";return Qt==ut?"up":Qt==lt?"left":Qt==pt?"right":""}function Pe(Qt,Jt){var $t=Jt.manager;return $t?$t.get(Qt):Qt}function Se(){_e.apply(this,arguments)}function Oe(){Se.apply(this,arguments),this.pX=null,this.pY=null}function Ie(){Se.apply(this,arguments)}function Ne(){_e.apply(this,arguments),this._timer=null,this._input=null}function we(){Se.apply(this,arguments)}function Le(){Se.apply(this,arguments)}function Me(){_e.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ce(Qt,Jt){return Jt=Jt||{},Jt.recognizers=z(Jt.recognizers,Ce.defaults.preset),new De(Qt,Jt)}function De(Qt,Jt){this.options=Ue({},Ce.defaults,Jt||{}),this.options.inputTarget=this.options.inputTarget||Qt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Qt,this.input=K(this),this.touchAction=new be(this,this.options.touchAction),Be(this,!0),N(this.options.recognizers,function($t){var en=this.add(new $t[0]($t[1]));$t[2]&&en.recognizeWith($t[2]),$t[3]&&en.requireFailure($t[3])},this)}function Be(Qt,Jt){var $t=Qt.element;if($t.style){var en;N(Qt.options.cssProps,function(tn,nn){en=X($t.style,nn),Jt?(Qt.oldCssProps[en]=$t.style[en],$t.style[en]=tn):$t.style[en]=Qt.oldCssProps[en]||""}),Jt||(Qt.oldCssProps={})}}function ze(Qt,Jt){var $t=E.createEvent("Event");$t.initEvent(Qt,!0,!0),$t.gesture=Jt,Jt.target.dispatchEvent($t)}var Fe=["","webkit","Moz","MS","ms","o"],Re=E.createElement("div"),We=Math.round,je=Math.abs,Ve=Date.now,Ue;Ue="function"==typeof Object.assign?Object.assign:function(Jt){if(Jt===A||null===Jt)throw new TypeError("Cannot convert undefined or null to object");for(var tn,$t=Object(Jt),en=1;en<arguments.length;en++)if(tn=arguments[en],tn!==A&&null!==tn)for(var nn in tn)tn.hasOwnProperty(nn)&&($t[nn]=tn[nn]);return $t};var Ge=L(function(Jt,$t,en){for(var tn=Object.keys($t),nn=0;nn<tn.length;)(!en||en&&Jt[tn[nn]]===A)&&(Jt[tn[nn]]=$t[tn[nn]]),nn++;return Jt},"extend","Use `assign`."),ke=L(function(Jt,$t){return Ge(Jt,$t,!0)},"merge","Use `assign`."),Xe=1,Ye=/mobile|tablet|ip(ad|hone|od)|android/i,Ze="ontouchstart"in m,qe=X(m,"PointerEvent")!==A,Ke=Ze&&Ye.test(navigator.userAgent),Qe="touch",$e="mouse",nt=1,ot=2,at=4,rt=8,st=1,lt=2,pt=4,ut=8,ct=16,mt=lt|pt,ht=ut|ct,ft=mt|ht,gt=["x","y"],yt=["clientX","clientY"];q.prototype={handler:function(){},init:function(){this.evEl&&F(this.element,this.evEl,this.domHandler),this.evTarget&&F(this.target,this.evTarget,this.domHandler),this.evWin&&F(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(Z(this.element),this.evWin,this.domHandler)}};var vt={mousedown:nt,mousemove:ot,mouseup:at};M(pe,q,{handler:function(Jt){var $t=vt[Jt.type];$t&nt&&0===Jt.button&&(this.pressed=!0),$t&ot&&1!==Jt.which&&($t=at);this.pressed&&($t&at&&(this.pressed=!1),this.callback(this.manager,$t,{pointers:[Jt],changedPointers:[Jt],pointerType:$e,srcEvent:Jt}))}});var Et={pointerdown:nt,pointermove:ot,pointerup:at,pointercancel:rt,pointerout:rt},_t={2:Qe,3:"pen",4:$e,5:"kinect"},Tt="pointerdown",At="pointermove pointerup pointercancel";m.MSPointerEvent&&!m.PointerEvent&&(Tt="MSPointerDown",At="MSPointerMove MSPointerUp MSPointerCancel"),M(de,q,{handler:function(Jt){var $t=this.store,en=!1,tn=Jt.type.toLowerCase().replace("ms",""),nn=Et[tn],on=_t[Jt.pointerType]||Jt.pointerType,rn=U($t,Jt.pointerId,"pointerId");nn&nt&&(0===Jt.button||on==Qe)?0>rn&&($t.push(Jt),rn=$t.length-1):nn&(at|rt)&&(en=!0);0>rn||($t[rn]=Jt,this.callback(this.manager,nn,{pointers:$t,changedPointers:[Jt],pointerType:on,srcEvent:Jt}),en&&$t.splice(rn,1))}});var Pt={touchstart:nt,touchmove:ot,touchend:at,touchcancel:rt};M(ue,q,{handler:function(Jt){var $t=Pt[Jt.type];if($t===nt&&(this.started=!0),!!this.started){var en=ce.call(this,Jt,$t);$t&(at|rt)&&0==en[0].length-en[1].length&&(this.started=!1),this.callback(this.manager,$t,{pointers:en[0],changedPointers:en[1],pointerType:Qe,srcEvent:Jt})}}});var It={touchstart:nt,touchmove:ot,touchend:at,touchcancel:rt};M(me,q,{handler:function(Jt){var $t=It[Jt.type],en=he.call(this,Jt,$t);en&&this.callback(this.manager,$t,{pointers:en[0],changedPointers:en[1],pointerType:Qe,srcEvent:Jt})}});var Lt=25;M(fe,q,{handler:function(Jt,$t,en){var tn=en.pointerType==Qe,nn=en.pointerType==$e;if(!(nn&&en.sourceCapabilities&&en.sourceCapabilities.firesTouchEvents)){if(tn)ge.call(this,$t,en);else if(nn&&ve.call(this,en))return;this.callback(Jt,$t,en)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Mt=X(Re.style,"touchAction"),Ct=Mt!==A,Dt="compute",Bt="auto",zt="manipulation",Ft="none",Rt="pan-x",Ht="pan-y",Wt=function(){if(!Ct)return!1;var Qt={},Jt=m.CSS&&m.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function($t){Qt[$t]=!Jt||m.CSS.supports("touch-action",$t)}),Qt}();be.prototype={set:function(Qt){Qt==Dt&&(Qt=this.compute()),Ct&&this.manager.element.style&&Wt[Qt]&&(this.manager.element.style[Mt]=Qt),this.actions=Qt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Qt=[];return N(this.manager.recognizers,function(Jt){D(Jt.options.enable,[Jt])&&(Qt=Qt.concat(Jt.getTouchAction()))}),xe(Qt.join(" "))},preventDefaults:function(Qt){var Jt=Qt.srcEvent,$t=Qt.offsetDirection;if(this.manager.session.prevented)return void Jt.preventDefault();var en=this.actions,tn=W(en,Ft)&&!Wt[Ft],nn=W(en,Ht)&&!Wt[Ht],on=W(en,Rt)&&!Wt[Rt];if(tn){var an=1===Qt.pointers.length,rn=2>Qt.distance,sn=250>Qt.deltaTime;if(an&&rn&&sn)return}return on&&nn?void 0:tn||nn&&$t&mt||on&&$t&ht?this.preventSrc(Jt):void 0},preventSrc:function(Qt){this.manager.session.prevented=!0,Qt.preventDefault()}};var jt=1,Vt=2,Ut=4,Gt=8,kt=Gt,Xt=16,Yt=32;_e.prototype={defaults:{},set:function(Qt){return Ue(this.options,Qt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Qt){if(O(Qt,"recognizeWith",this))return this;var Jt=this.simultaneous;return Qt=Pe(Qt,this),Jt[Qt.id]||(Jt[Qt.id]=Qt,Qt.recognizeWith(this)),this},dropRecognizeWith:function(Qt){return O(Qt,"dropRecognizeWith",this)?this:(Qt=Pe(Qt,this),delete this.simultaneous[Qt.id],this)},requireFailure:function(Qt){if(O(Qt,"requireFailure",this))return this;var Jt=this.requireFail;return Qt=Pe(Qt,this),-1===U(Jt,Qt)&&(Jt.push(Qt),Qt.requireFailure(this)),this},dropRequireFailure:function(Qt){if(O(Qt,"dropRequireFailure",this))return this;Qt=Pe(Qt,this);var Jt=U(this.requireFail,Qt);return-1<Jt&&this.requireFail.splice(Jt,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(Qt){return!!this.simultaneous[Qt.id]},emit:function(Qt){function Jt(tn){$t.manager.emit(tn,Qt)}var $t=this,en=this.state;en<Gt&&Jt($t.options.event+Te(en)),Jt($t.options.event),Qt.additionalEvent&&Jt(Qt.additionalEvent),en>=Gt&&Jt($t.options.event+Te(en))},tryEmit:function(Qt){return this.canEmit()?this.emit(Qt):void(this.state=Yt)},canEmit:function(){for(var Qt=0;Qt<this.requireFail.length;){if(!(this.requireFail[Qt].state&(Yt|jt)))return!1;Qt++}return!0},recognize:function(Qt){var Jt=Ue({},Qt);return D(this.options.enable,[this,Jt])?void(this.state&(kt|Xt|Yt)&&(this.state=jt),this.state=this.process(Jt),this.state&(Vt|Ut|Gt|Xt)&&this.tryEmit(Jt)):(this.reset(),void(this.state=Yt))},process:function(){},getTouchAction:function(){},reset:function(){}},M(Se,_e,{defaults:{pointers:1},attrTest:function(Qt){var Jt=this.options.pointers;return 0===Jt||Qt.pointers.length===Jt},process:function(Qt){var Jt=this.state,$t=Qt.eventType,en=Jt&(Vt|Ut),tn=this.attrTest(Qt);if(en&&($t&rt||!tn))return Jt|Xt;return en||tn?$t&at?Jt|Gt:Jt&Vt?Jt|Ut:Vt:Yt}}),M(Oe,Se,{defaults:{event:"pan",threshold:10,pointers:1,direction:ft},getTouchAction:function(){var Qt=this.options.direction,Jt=[];return Qt&mt&&Jt.push(Ht),Qt&ht&&Jt.push(Rt),Jt},directionTest:function(Qt){var Jt=this.options,$t=!0,en=Qt.distance,tn=Qt.direction,nn=Qt.deltaX,on=Qt.deltaY;return tn&Jt.direction||(Jt.direction&mt?(tn=0===nn?st:0>nn?lt:pt,$t=nn!=this.pX,en=Math.abs(Qt.deltaX)):(tn=0===on?st:0>on?ut:ct,$t=on!=this.pY,en=Math.abs(Qt.deltaY))),Qt.direction=tn,$t&&en>Jt.threshold&&tn&Jt.direction},attrTest:function(Qt){return Se.prototype.attrTest.call(this,Qt)&&(this.state&Vt||!(this.state&Vt)&&this.directionTest(Qt))},emit:function(Qt){this.pX=Qt.deltaX,this.pY=Qt.deltaY;var Jt=Ae(Qt.direction);Jt&&(Qt.additionalEvent=this.options.event+Jt),this._super.emit.call(this,Qt)}}),M(Ie,Se,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(Qt){return this._super.attrTest.call(this,Qt)&&(Math.abs(Qt.scale-1)>this.options.threshold||this.state&Vt)},emit:function(Qt){if(1!==Qt.scale){var Jt=1>Qt.scale?"in":"out";Qt.additionalEvent=this.options.event+Jt}this._super.emit.call(this,Qt)}}),M(Ne,_e,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Bt]},process:function(Qt){var Jt=this.options,$t=Qt.pointers.length===Jt.pointers,en=Qt.distance<Jt.threshold,tn=Qt.deltaTime>Jt.time;if(this._input=Qt,!en||!$t||Qt.eventType&(at|rt)&&!tn)this.reset();else if(Qt.eventType&nt)this.reset(),this._timer=S(function(){this.state=kt,this.tryEmit()},Jt.time,this);else if(Qt.eventType&at)return kt;return Yt},reset:function(){clearTimeout(this._timer)},emit:function(Qt){this.state!==kt||(Qt&&Qt.eventType&at?this.manager.emit(this.options.event+"up",Qt):(this._input.timeStamp=Ve(),this.manager.emit(this.options.event,this._input)))}}),M(we,Se,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(Qt){return this._super.attrTest.call(this,Qt)&&(Math.abs(Qt.rotation)>this.options.threshold||this.state&Vt)}}),M(Le,Se,{defaults:{event:"swipe",threshold:10,velocity:0.3,direction:mt|ht,pointers:1},getTouchAction:function(){return Oe.prototype.getTouchAction.call(this)},attrTest:function(Qt){var $t,Jt=this.options.direction;return Jt&(mt|ht)?$t=Qt.overallVelocity:Jt&mt?$t=Qt.overallVelocityX:Jt&ht&&($t=Qt.overallVelocityY),this._super.attrTest.call(this,Qt)&&Jt&Qt.offsetDirection&&Qt.distance>this.options.threshold&&Qt.maxPointers==this.options.pointers&&je($t)>this.options.velocity&&Qt.eventType&at},emit:function(Qt){var Jt=Ae(Qt.offsetDirection);Jt&&this.manager.emit(this.options.event+Jt,Qt),this.manager.emit(this.options.event,Qt)}}),M(Me,_e,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[zt]},process:function(Qt){var Jt=this.options,$t=Qt.pointers.length===Jt.pointers,en=Qt.distance<Jt.threshold,tn=Qt.deltaTime<Jt.time;if(this.reset(),Qt.eventType&nt&&0===this.count)return this.failTimeout();if(en&&tn&&$t){if(Qt.eventType!=at)return this.failTimeout();var nn=!this.pTime||Qt.timeStamp-this.pTime<Jt.interval,on=!this.pCenter||ae(this.pCenter,Qt.center)<Jt.posThreshold;this.pTime=Qt.timeStamp,this.pCenter=Qt.center,on&&nn?this.count+=1:this.count=1,this._input=Qt;var an=this.count%Jt.taps;if(0==an)return this.hasRequireFailures()?(this._timer=S(function(){this.state=kt,this.tryEmit()},Jt.interval,this),Vt):kt}return Yt},failTimeout:function(){return this._timer=S(function(){this.state=Yt},this.options.interval,this),Yt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==kt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ce.VERSION="2.0.8",Ce.defaults={domEvents:!1,touchAction:Dt,enable:!0,inputTarget:null,inputClass:null,preset:[[we,{enable:!1}],[Ie,{enable:!1},["rotate"]],[Le,{direction:mt}],[Oe,{direction:mt},["swipe"]],[Me],[Me,{event:"doubletap",taps:2},["tap"]],[Ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var qt=2;De.prototype={set:function(Qt){return Ue(this.options,Qt),Qt.touchAction&&this.touchAction.update(),Qt.inputTarget&&(this.input.destroy(),this.input.target=Qt.inputTarget,this.input.init()),this},stop:function(Qt){this.session.stopped=Qt?qt:1},recognize:function(Qt){var Jt=this.session;if(!Jt.stopped){this.touchAction.preventDefaults(Qt);var $t,en=this.recognizers,tn=Jt.curRecognizer;(!tn||tn&&tn.state&kt)&&(tn=Jt.curRecognizer=null);for(var nn=0;nn<en.length;)$t=en[nn],Jt.stopped!==qt&&(!tn||$t==tn||$t.canRecognizeWith(tn))?$t.recognize(Qt):$t.reset(),!tn&&$t.state&(Vt|Ut|Gt)&&(tn=Jt.curRecognizer=$t),nn++}},get:function(Qt){if(Qt instanceof _e)return Qt;for(var Jt=this.recognizers,$t=0;$t<Jt.length;$t++)if(Jt[$t].options.event==Qt)return Jt[$t];return null},add:function(Qt){if(O(Qt,"add",this))return this;var Jt=this.get(Qt.options.event);return Jt&&this.remove(Jt),this.recognizers.push(Qt),Qt.manager=this,this.touchAction.update(),Qt},remove:function(Qt){if(O(Qt,"remove",this))return this;if(Qt=this.get(Qt),Qt){var Jt=this.recognizers,$t=U(Jt,Qt);-1!==$t&&(Jt.splice($t,1),this.touchAction.update())}return this},on:function(Qt,Jt){if(Qt!==A&&Jt!==A){var $t=this.handlers;return N(V(Qt),function(en){$t[en]=$t[en]||[],$t[en].push(Jt)}),this}},off:function(Qt,Jt){if(Qt!==A){var $t=this.handlers;return N(V(Qt),function(en){Jt?$t[en]&&$t[en].splice(U($t[en],Jt),1):delete $t[en]}),this}},emit:function(Qt,Jt){this.options.domEvents&&ze(Qt,Jt);var $t=this.handlers[Qt]&&this.handlers[Qt].slice();if($t&&$t.length){Jt.type=Qt,Jt.preventDefault=function(){Jt.srcEvent.preventDefault()};for(var en=0;en<$t.length;)$t[en](Jt),en++}},destroy:function(){this.element&&Be(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ue(Ce,{INPUT_START:nt,INPUT_MOVE:ot,INPUT_END:at,INPUT_CANCEL:rt,STATE_POSSIBLE:jt,STATE_BEGAN:Vt,STATE_CHANGED:Ut,STATE_ENDED:Gt,STATE_RECOGNIZED:kt,STATE_CANCELLED:Xt,STATE_FAILED:Yt,DIRECTION_NONE:st,DIRECTION_LEFT:lt,DIRECTION_RIGHT:pt,DIRECTION_UP:ut,DIRECTION_DOWN:ct,DIRECTION_HORIZONTAL:mt,DIRECTION_VERTICAL:ht,DIRECTION_ALL:ft,Manager:De,Input:q,TouchAction:be,TouchInput:me,MouseInput:pe,PointerEventInput:de,TouchMouseInput:fe,SingleTouchInput:ue,Recognizer:_e,AttrRecognizer:Se,Tap:Me,Pan:Oe,Swipe:Le,Pinch:Ie,Rotate:we,Press:Ne,on:F,off:R,each:N,merge:ke,extend:Ge,assign:Ue,inherit:M,bindFn:C,prefixed:X});var Kt="undefined"==typeof m?"undefined"==typeof self?{}:self:m;Kt.Hammer=Ce,"function"==typeof define&&define.amd?define(function(){return Ce}):"undefined"!=typeof module&&module.exports?module.exports=Ce:m[T]=Ce})(window,document,"Hammer");function ConvexHullGrahamScan(){this.anchorPoint=void 0,this.reverse=!1,this.points=[]}ConvexHullGrahamScan.prototype={constructor:ConvexHullGrahamScan,Point:function(m,E){this.x=m,this.y=E},_findPolarAngle:function(m,E){var T,A;if(!m||!E)return 0;if(T=E.x-m.x,A=E.y-m.y,0==T&&0==A)return 0;var O=Math.atan2(A,T)*57.295779513082;return this.reverse?0>=O&&(O+=360):0<=O&&(O+=360),O},addPoint:function(m,E){var T=void 0===this.anchorPoint||this.anchorPoint.y>E||this.anchorPoint.y===E&&this.anchorPoint.x>m;T?(void 0!==this.anchorPoint&&this.points.push(new this.Point(this.anchorPoint.x,this.anchorPoint.y)),this.anchorPoint=new this.Point(m,E)):this.points.push(new this.Point(m,E))},_sortPoints:function(){var m=this;return this.points.sort(function(E,T){var A=m._findPolarAngle(m.anchorPoint,E),S=m._findPolarAngle(m.anchorPoint,T);return S>A?-1:A>S?1:0})},_checkPoints:function(m,E,T){var A,S=this._findPolarAngle(m,E),O=this._findPolarAngle(m,T);return S>O?(A=S-O,!(180<A)):!(O>S)||(A=O-S,180<A)},getHull:function(){var m,E,T=[];if(this.reverse=this.points.every(function(L){return 0>L.x&&0>L.y}),m=this._sortPoints(),E=m.length,3>E)return m.unshift(this.anchorPoint),m;for(T.push(m.shift(),m.shift());;){var A,S,O;if(T.push(m.shift()),A=T[T.length-3],S=T[T.length-2],O=T[T.length-1],this._checkPoints(A,S,O)&&T.splice(T.length-2,1),0==m.length){if(E==T.length){var N=this.anchorPoint;return T=T.filter(function(L){return!!L}),T.some(function(L){return L.x==N.x&&L.y==N.y})||T.unshift(this.anchorPoint),T}m=T,E=m.length,T=[],T.push(m.shift(),m.shift())}}}},"function"==typeof define&&define.amd&&define(function(){return ConvexHullGrahamScan}),"undefined"!=typeof module&&(module.exports=ConvexHullGrahamScan);THREE.OrbitControls=function(m,E){function T(){return 2*Math.PI/60/60*ae.autoRotateSpeed}function A(){return Math.pow(0.95,ae.zoomSpeed)}function S(Ne){me.theta-=Ne}function O(Ne){me.phi-=Ne}function N(Ne){ae.object instanceof THREE.PerspectiveCamera?he/=Ne:ae.object instanceof THREE.OrthographicCamera?(ae.object.zoom=Math.max(ae.minZoom,Math.min(ae.maxZoom,ae.object.zoom*Ne)),ae.object.updateProjectionMatrix(),ge=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ae.enableZoom=!1)}function L(Ne){ae.object instanceof THREE.PerspectiveCamera?he*=Ne:ae.object instanceof THREE.OrthographicCamera?(ae.object.zoom=Math.max(ae.minZoom,Math.min(ae.maxZoom,ae.object.zoom/Ne)),ae.object.updateProjectionMatrix(),ge=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ae.enableZoom=!1)}function M(Ne){ye.set(Ne.clientX,Ne.clientY)}function C(Ne){Te.set(Ne.clientX,Ne.clientY)}function D(Ne){xe.set(Ne.clientX,Ne.clientY)}function z(Ne){ve.set(Ne.clientX,Ne.clientY),be.subVectors(ve,ye);var we=ae.domElement===document?ae.domElement.body:ae.domElement;S(2*Math.PI*be.x/we.clientWidth*ae.rotateSpeed),O(2*Math.PI*be.y/window.innerHeight*ae.rotateSpeed),ye.copy(ve),ae.update()}function F(Ne){Ae.set(Ne.clientX,Ne.clientY),Pe.subVectors(Ae,Te),0<Pe.y?N(A()):0>Pe.y&&L(A()),Te.copy(Ae),ae.update()}function R(Ne){Ee.set(Ne.clientX,Ne.clientY),_e.subVectors(Ee,xe),Ie(_e.x,_e.y),xe.copy(Ee),ae.update()}function H(){}function W(Ne){0>Ne.deltaY?L(A()):0<Ne.deltaY&&N(A()),ae.update()}function V(Ne){switch(Ne.keyCode){case ae.keys.UP:Ie(0,ae.keyPanSpeed),ae.update();break;case ae.keys.BOTTOM:Ie(0,-ae.keyPanSpeed),ae.update();break;case ae.keys.LEFT:Ie(ae.keyPanSpeed,0),ae.update();break;case ae.keys.RIGHT:Ie(-ae.keyPanSpeed,0),ae.update();}}function U(Ne){ye.set(Ne.touches[0].pageX,Ne.touches[0].pageY)}function G(Ne){var we=Ne.touches[0].pageX-Ne.touches[1].pageX,Le=Ne.touches[0].pageY-Ne.touches[1].pageY,Me=Math.sqrt(we*we+Le*Le);Te.set(0,Me)}function k(Ne){xe.set(Ne.touches[0].pageX,Ne.touches[0].pageY)}function X(Ne){ve.set(Ne.touches[0].pageX,Ne.touches[0].pageY),be.subVectors(ve,ye);var we=ae.domElement===document?ae.domElement.body:ae.domElement;S(2*Math.PI*be.x/we.clientWidth*ae.rotateSpeed),O(2*Math.PI*be.y/window.innerHeight*ae.rotateSpeed),ye.copy(ve),ae.update()}function Y(Ne){var we=Ne.touches[0].pageX-Ne.touches[1].pageX,Le=Ne.touches[0].pageY-Ne.touches[1].pageY,Me=Math.sqrt(we*we+Le*Le);Ae.set(0,Me),Pe.subVectors(Ae,Te),2<Pe.y?L(A()):-2>Pe.y&&N(A()),Te.copy(Ae),ae.update()}function Z(Ne){Ee.set(Ne.touches[0].pageX,Ne.touches[0].pageY),_e.subVectors(Ee,xe),Ie(_e.x,_e.y),xe.copy(Ee),ae.update()}function q(){}function K(Ne){if(!1!==ae.enabled){switch(Ne.button){case ae.mouseButtons.ORBIT:if(!1===ae.enableRotate)return;M(Ne),de=pe.ROTATE;break;case ae.mouseButtons.ZOOM:if(!1===ae.enableZoom)return;C(Ne),de=pe.DOLLY;break;case ae.mouseButtons.PAN:if(!1===ae.enablePan)return;D(Ne),de=pe.PAN;}de!==pe.NONE&&(window.PointerEvent?(document.addEventListener("pointermove",Q,!1),document.addEventListener("pointerup",J,!1)):(document.addEventListener("mousemove",Q,!1),document.addEventListener("mouseup",J,!1)),ae.dispatchEvent(se))}}function Q(Ne){if(!1!==ae.enabled)switch(Ne.preventDefault(),de){case pe.ROTATE:if(!1===ae.enableRotate)return;z(Ne);break;case pe.DOLLY:if(!1===ae.enableZoom)return;F(Ne);break;case pe.PAN:if(!1===ae.enablePan)return;R(Ne);}}function J(Ne){!1===ae.enabled||(H(Ne),window.PointerEvent?(document.removeEventListener("pointermove",Q,!1),document.removeEventListener("pointerup",J,!1)):(document.removeEventListener("mousemove",Q,!1),document.removeEventListener("mouseup",J,!1)),ae.dispatchEvent(le),de=pe.NONE)}function $(Ne){!1===ae.enabled||!1===ae.enableZoom||de!==pe.NONE&&de!==pe.ROTATE||(W(Ne),ae.dispatchEvent(se),ae.dispatchEvent(le))}function ee(Ne){!1===ae.enabled||!1===ae.enableKeys||!1===ae.enablePan||V(Ne)}function te(Ne){if(!1!==ae.enabled){switch(Ne.touches.length){case 1:if(!1===ae.enableRotate)return;U(Ne),de=pe.TOUCH_ROTATE;break;case 2:if(!1===ae.enableZoom)return;G(Ne),de=pe.TOUCH_DOLLY;break;case 3:if(!1===ae.enablePan)return;k(Ne),de=pe.TOUCH_PAN;break;default:de=pe.NONE;}de!==pe.NONE&&ae.dispatchEvent(se)}}function ne(Ne){if(!1!==ae.enabled)switch(Ne.preventDefault(),Ne.stopPropagation(),Ne.touches.length){case 1:if(!1===ae.enableRotate)return;if(de!==pe.TOUCH_ROTATE)return;X(Ne);break;case 2:if(!1===ae.enableZoom)return;if(de!==pe.TOUCH_DOLLY)return;Y(Ne);break;case 3:if(!1===ae.enablePan)return;if(de!==pe.TOUCH_PAN)return;Z(Ne);break;default:de=pe.NONE;}}function ie(Ne){!1===ae.enabled||(q(Ne),ae.dispatchEvent(le),de=pe.NONE)}function oe(Ne){Ne.preventDefault()}this.object=m,this.domElement=E===void 0?document:E,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=Infinity,this.enableDamping=!1,this.dampingFactor=0.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return ce.phi},this.getAzimuthalAngle=function(){return ce.theta},this.saveState=function(){ae.target0.copy(ae.target),ae.position0.copy(ae.object.position),ae.zoom0=ae.object.zoom},this.reset=function(){ae.target.copy(ae.target0),ae.object.position.copy(ae.position0),ae.object.zoom=ae.zoom0,ae.object.updateProjectionMatrix(),ae.dispatchEvent(re),ae.update(),de=pe.NONE},this.update=function(){var Ne=new THREE.Vector3,we=new THREE.Quaternion().setFromUnitVectors(m.up,new THREE.Vector3(0,1,0)),Le=we.clone().inverse(),Me=new THREE.Vector3,Ce=new THREE.Quaternion;return function(){var Be=ae.object.position;return Ne.copy(Be).sub(ae.target),Ne.applyQuaternion(we),ce.setFromVector3(Ne),ae.autoRotate&&de===pe.NONE&&S(T()),ce.theta+=me.theta,ce.phi+=me.phi,ce.theta=Math.max(ae.minAzimuthAngle,Math.min(ae.maxAzimuthAngle,ce.theta)),ce.phi=Math.max(ae.minPolarAngle,Math.min(ae.maxPolarAngle,ce.phi)),ce.makeSafe(),ce.radius*=he,ce.radius=Math.max(ae.minDistance,Math.min(ae.maxDistance,ce.radius)),ae.target.add(fe),Ne.setFromSpherical(ce),Ne.applyQuaternion(Le),Be.copy(ae.target).add(Ne),ae.object.lookAt(ae.target),!0===ae.enableDamping?(me.theta*=1-ae.dampingFactor,me.phi*=1-ae.dampingFactor):me.set(0,0,0),he=1,fe.set(0,0,0),(ge||Me.distanceToSquared(ae.object.position)>ue||8*(1-Ce.dot(ae.object.quaternion))>ue)&&(ae.dispatchEvent(re),Me.copy(ae.object.position),Ce.copy(ae.object.quaternion),ge=!1,!0)}}(),this.dispose=function(){ae.domElement.removeEventListener("contextmenu",oe,!1),ae.domElement.removeEventListener("wheel",$,!1),ae.domElement.removeEventListener("touchstart",te,!1),ae.domElement.removeEventListener("touchend",ie,!1),ae.domElement.removeEventListener("touchmove",ne,!1),window.PointerEvent?(document.removeEventListener("pointermove",Q,!1),document.removeEventListener("pointerup",J,!1),ae.domElement.removeEventListener("pointerdown",K,!1)):(document.removeEventListener("mousemove",Q,!1),document.removeEventListener("mouseup",J,!1),ae.domElement.removeEventListener("mousedown",K,!1)),window.removeEventListener("keydown",ee,!1)};var ae=this,re={type:"change"},se={type:"start"},le={type:"end"},pe={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},de=pe.NONE,ue=1e-6,ce=new THREE.Spherical,me=new THREE.Spherical,he=1,fe=new THREE.Vector3,ge=!1,ye=new THREE.Vector2,ve=new THREE.Vector2,be=new THREE.Vector2,xe=new THREE.Vector2,Ee=new THREE.Vector2,_e=new THREE.Vector2,Te=new THREE.Vector2,Ae=new THREE.Vector2,Pe=new THREE.Vector2,Se=function(){var Ne=new THREE.Vector3;return function(Le,Me){Ne.setFromMatrixColumn(Me,0),Ne.multiplyScalar(-Le),fe.add(Ne)}}(),Oe=function(){var Ne=new THREE.Vector3;return function(Le,Me){Ne.setFromMatrixColumn(Me,1),Ne.multiplyScalar(Le),fe.add(Ne)}}(),Ie=function(){var Ne=new THREE.Vector3;return function(Le,Me){var Ce=ae.domElement===document?ae.domElement.body:ae.domElement;if(ae.object instanceof THREE.PerspectiveCamera){var De=ae.object.position;Ne.copy(De).sub(ae.target);var Be=Ne.length();Be*=Math.tan(ae.object.fov/2*Math.PI/180),Se(2*Le*Be/window.innerHeight,ae.object.matrix),Oe(2*Me*Be/window.innerHeight,ae.object.matrix)}else ae.object instanceof THREE.OrthographicCamera?(Se(Le*(ae.object.right-ae.object.left)/ae.object.zoom/Ce.clientWidth,ae.object.matrix),Oe(Me*(ae.object.top-ae.object.bottom)/ae.object.zoom/window.innerHeight,ae.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),ae.enablePan=!1)}}();ae.domElement.addEventListener("contextmenu",oe,!1),ae.domElement.addEventListener("wheel",$,!1),ae.domElement.addEventListener("touchstart",te,!1),ae.domElement.addEventListener("touchend",ie,!1),ae.domElement.addEventListener("touchmove",ne,!1),window.PointerEvent?ae.domElement.addEventListener("pointerdown",K,!1):ae.domElement.addEventListener("mousedown",K,!1),window.addEventListener("keydown",ee,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(m){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!m}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(m){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!m}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(m){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!m}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(m){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!m}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(m){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!m}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(m){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=m}}});(function(){"use strict";function m(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new O.BufferGeometry,this.widthCallback=null}function E(N,L,M,C,D){var z;if(N=N.subarray||N.slice?N:N.buffer,M=M.subarray||M.slice?M:M.buffer,N=L?N.subarray?N.subarray(L,D&&L+D):N.slice(L,D&&L+D):N,M.set)M.set(N,C);else for(z=0;z<N.length;z++)M[z+C]=N[z];return M}function T(N){function L(z,F){return void 0===z?F:z}O.Material.call(this),N=N||{},this.lineWidth=L(N.lineWidth,1),this.map=L(N.map,null),this.useMap=L(N.useMap,0),this.alphaMap=L(N.alphaMap,null),this.useAlphaMap=L(N.useAlphaMap,0),this.color=L(N.color,new O.Color(16777215)),this.opacity=L(N.opacity,1),this.resolution=L(N.resolution,new O.Vector2(1,1)),this.sizeAttenuation=L(N.sizeAttenuation,1),this.near=L(N.near,1),this.far=L(N.far,1),this.dashArray=L(N.dashArray,[]),this.useDash=[]===this.dashArray?0:1,this.visibility=L(N.visibility,1),this.alphaTest=L(N.alphaTest,0),this.repeat=L(N.repeat,new O.Vector2(1,1));var D=new O.RawShaderMaterial({uniforms:{lineWidth:{type:"f",value:this.lineWidth},map:{type:"t",value:this.map},useMap:{type:"f",value:this.useMap},alphaMap:{type:"t",value:this.alphaMap},useAlphaMap:{type:"f",value:this.useAlphaMap},color:{type:"c",value:this.color},opacity:{type:"f",value:this.opacity},resolution:{type:"v2",value:this.resolution},sizeAttenuation:{type:"f",value:this.sizeAttenuation},near:{type:"f",value:this.near},far:{type:"f",value:this.far},dashArray:{type:"v2",value:new O.Vector2(this.dashArray[0],this.dashArray[1])},useDash:{type:"f",value:this.useDash},visibility:{type:"f",value:this.visibility},alphaTest:{type:"f",value:this.alphaTest},repeat:{type:"v2",value:this.repeat}},vertexShader:["precision highp float;","","attribute vec3 position;","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute vec2 uv;","attribute float counters;","","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float near;","uniform float far;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","\t float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","\t float pixelWidth = finalPosition.w * pixelWidthRatio;","    float w = 1.8 * pixelWidth * lineWidth * width;","","    if( sizeAttenuation == 1. ) {","        w = 1.8 * lineWidth * width;","    }","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec2 normal = vec2( -dir.y, dir.x );","    normal.x /= aspect;","    normal *= .5 * w;","","    vec4 offset = vec4( normal * side, 0.0, 1.0 );","    finalPosition.xy += offset.xy;","","    gl_Position = finalPosition;","","}"].join("\r\n"),fragmentShader:["#extension GL_OES_standard_derivatives : enable","precision mediump float;","","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform vec2 dashArray;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","\t if( c.a < alphaTest ) discard;","\t if( useDash == 1. ){","\t \t ","\t }","    gl_FragColor = c;","\t gl_FragColor.a *= step(vCounters,visibility);","}"].join("\r\n")});return delete N.lineWidth,delete N.map,delete N.useMap,delete N.alphaMap,delete N.useAlphaMap,delete N.color,delete N.opacity,delete N.resolution,delete N.sizeAttenuation,delete N.near,delete N.far,delete N.dashArray,delete N.visibility,delete N.alphaTest,delete N.repeat,D.type="MeshLineMaterial",D.setValues(N),D}var A=this,S="undefined"!=typeof require,O=A.THREE||S&&require("three");if(!O)throw new Error("MeshLine requires three.js");m.prototype.setGeometry=function(N,L){if(this.widthCallback=L,this.positions=[],this.counters=[],N instanceof O.Geometry)for(var M=0;M<N.vertices.length;M++){var C=N.vertices[M],L=M/N.vertices.length;this.positions.push(C.x,C.y,C.z),this.positions.push(C.x,C.y,C.z),this.counters.push(L),this.counters.push(L)}if(N instanceof O.BufferGeometry,N instanceof Float32Array||N instanceof Array)for(var L,M=0;M<N.length;M+=3)L=M/N.length,this.positions.push(N[M],N[M+1],N[M+2]),this.positions.push(N[M],N[M+1],N[M+2]),this.counters.push(L),this.counters.push(L);this.process()},m.prototype.compareV3=function(N,L){var M=6*N,C=6*L;return this.positions[M]===this.positions[C]&&this.positions[M+1]===this.positions[C+1]&&this.positions[M+2]===this.positions[C+2]},m.prototype.copyV3=function(N){var L=6*N;return[this.positions[L],this.positions[L+1],this.positions[L+2]]},m.prototype.process=function(){var N=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var L=0;L<N;L++)this.side.push(1),this.side.push(-1);for(var M,L=0;L<N;L++)M=this.widthCallback?this.widthCallback(L/(N-1)):1,this.width.push(M),this.width.push(M);for(var L=0;L<N;L++)this.uvs.push(L/(N-1),0),this.uvs.push(L/(N-1),1);var C;C=this.compareV3(0,N-1)?this.copyV3(N-2):this.copyV3(0),this.previous.push(C[0],C[1],C[2]),this.previous.push(C[0],C[1],C[2]);for(var L=0;L<N-1;L++)C=this.copyV3(L),this.previous.push(C[0],C[1],C[2]),this.previous.push(C[0],C[1],C[2]);for(var L=1;L<N;L++)C=this.copyV3(L),this.next.push(C[0],C[1],C[2]),this.next.push(C[0],C[1],C[2]);C=this.compareV3(N-1,0)?this.copyV3(1):this.copyV3(N-1),this.next.push(C[0],C[1],C[2]),this.next.push(C[0],C[1],C[2]);for(var D,L=0;L<N-1;L++)D=2*L,this.indices_array.push(D,D+1,D+2),this.indices_array.push(D+2,D+1,D+3);this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new O.BufferAttribute(new Float32Array(this.positions),3),previous:new O.BufferAttribute(new Float32Array(this.previous),3),next:new O.BufferAttribute(new Float32Array(this.next),3),side:new O.BufferAttribute(new Float32Array(this.side),1),width:new O.BufferAttribute(new Float32Array(this.width),1),uv:new O.BufferAttribute(new Float32Array(this.uvs),2),index:new O.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new O.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.addAttribute("position",this.attributes.position),this.geometry.addAttribute("previous",this.attributes.previous),this.geometry.addAttribute("next",this.attributes.next),this.geometry.addAttribute("side",this.attributes.side),this.geometry.addAttribute("width",this.attributes.width),this.geometry.addAttribute("uv",this.attributes.uv),this.geometry.addAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},m.prototype.advance=function(N){var L=this.attributes.position.array,M=this.attributes.previous.array,C=this.attributes.next.array,D=L.length;E(L,0,M,0,D),E(L,6,L,0,D-6),L[D-6]=N.x,L[D-5]=N.y,L[D-4]=N.z,L[D-3]=N.x,L[D-2]=N.y,L[D-1]=N.z,E(L,6,C,0,D-6),C[D-6]=N.x,C[D-5]=N.y,C[D-4]=N.z,C[D-3]=N.x,C[D-2]=N.y,C[D-1]=N.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0};T.prototype=Object.create(O.Material.prototype),T.prototype.constructor=T,T.prototype.copy=function(N){return O.Material.prototype.copy.call(this,N),this.lineWidth=N.lineWidth,this.map=N.map,this.useMap=N.useMap,this.alphaMap=N.alphaMap,this.useAlphaMap=N.useAlphaMap,this.color.copy(N.color),this.opacity=N.opacity,this.resolution.copy(N.resolution),this.sizeAttenuation=N.sizeAttenuation,this.near=N.near,this.far=N.far,this.dashArray.copy(N.dashArray),this.useDash=N.useDash,this.visibility=N.visibility,this.alphaTest=N.alphaTest,this.repeat.copy(N.repeat),this},"undefined"==typeof exports?(A.MeshLine=m,A.MeshLineMaterial=T):("undefined"!=typeof module&&module.exports&&(exports=module.exports={MeshLine:m,MeshLineMaterial:T}),exports.MeshLine=m,exports.MeshLineMaterial=T)}).call(this);!function(m,E){"object"==typeof exports&&"undefined"!=typeof module?E(require("three")):"function"==typeof define&&define.amd?define(["three"],E):E(m.THREE)}(this,function(m){"use strict";function E(){return document.createElement("canvas")}function T(A,S){if(A.length){var O=E().getContext("2d");return O.font=S,function(N,L){if(0<N.length)return L&&(N=N.map(L)),N.reduce(function(M,C){return Math.max(M,C)})}(A,function(N){return O.measureText(N).width})}return 0}(m=m&&m.hasOwnProperty("default")?m.default:m).TextTexture=function(A){function S(N){void 0===N&&(N={});var L=N.autoRedraw;void 0===L&&(L=!0);var M=N.text;void 0===M&&(M="");var C=N.fontStyle;void 0===C&&(C="normal");var D=N.fontVariant;void 0===D&&(D="normal");var z=N.fontWeight;void 0===z&&(z="normal");var F=N.fontSize;void 0===F&&(F=16);var R=N.fontFamily;void 0===R&&(R="sans-serif");var H=N.textAlign;void 0===H&&(H="center");var W=N.lineHeight;void 0===W&&(W=1.15);var V=N.padding;void 0===V&&(V=.25);var U=N.magFilter;void 0===U&&(U=m.LinearFilter);var G=N.minFilter;void 0===G&&(G=m.LinearFilter);var k=N.mapping,X=N.wrapS,Y=N.wrapT,Z=N.format,q=N.type,K=N.anisotropy;A.call(this,E(),k,X,Y,U,G,Z,q,K),this.autoRedraw=L,this._text=M,this._fontStyle=C,this._fontVariant=D,this._fontWeight=z,this._fontSize=F,this._fontFamily=R,this._textAlign=H,this._lineHeight=W,this._padding=V,this.redraw()}A&&(S.__proto__=A),S.prototype=Object.create(A&&A.prototype),S.prototype.constructor=S;var O={text:{configurable:!0},lines:{configurable:!0},linesCount:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},fontSize:{configurable:!0},fontFamily:{configurable:!0},font:{configurable:!0},textAlign:{configurable:!0},lineHeight:{configurable:!0},lineHeightInPixels:{configurable:!0},textBoxWidthInPixels:{configurable:!0},textBoxHeight:{configurable:!0},textBoxHeightInPixels:{configurable:!0},padding:{configurable:!0},paddingInPixels:{configurable:!0},paddingBoxWidthInPixels:{configurable:!0},paddingBoxHeight:{configurable:!0},paddingBoxHeightInPixels:{configurable:!0},aspect:{configurable:!0}};return S.prototype.redraw=function(){var N=this,L=this.image.getContext("2d");if(L.clearRect(0,0,L.canvas.width,L.canvas.height),this.textBoxWidthInPixels&&this.textBoxHeightInPixels){var M;switch(L.canvas.width=this.paddingBoxWidthInPixels,L.canvas.height=this.paddingBoxHeightInPixels,L.font=this.font,L.textBaseline="middle",L.fillStyle="white",this.textAlign){case"left":L.textAlign="left",M=this.paddingInPixels;break;case"right":L.textAlign="right",M=this.paddingInPixels+this.textBoxWidthInPixels;break;case"center":L.textAlign="center",M=this.paddingInPixels+this.textBoxWidthInPixels/2;}var C=this.paddingInPixels+this.fontSize/2;this.lines.forEach(function(D){L.fillText(D,M,C),C+=N.lineHeightInPixels})}else L.canvas.width=L.canvas.height=1;this.needsUpdate=!0},S.prototype._redrawIfAuto=function(){this.autoRedraw&&this.redraw()},O.text.get=function(){return this._text},O.text.set=function(N){this._text!==N&&(this._text=N,this._lines=void 0,this._textBoxWidthInPixels=void 0,this._redrawIfAuto())},O.lines.get=function(){var N;return void 0===this._lines&&(this._lines=(N=this.text)?N.split("\n"):[]),this._lines},O.linesCount.get=function(){return this.lines.length},O.fontStyle.get=function(){return this._fontStyle},O.fontStyle.set=function(N){this._fontStyle!==N&&(this._fontStyle=N,this._textBoxWidthInPixels=void 0,this._redrawIfAuto())},O.fontVariant.get=function(){return this._fontVariant},O.fontVariant.set=function(N){this._fontVariant!==N&&(this._fontVariant=N,this._textBoxWidthInPixels=void 0,this._redrawIfAuto())},O.fontWeight.get=function(){return this._fontWeight},O.fontWeight.set=function(N){this._fontWeight!==N&&(this._fontWeight=N,this._textBoxWidthInPixels=void 0,this._redrawIfAuto())},O.fontSize.get=function(){return this._fontSize},O.fontSize.set=function(N){this._fontSize!==N&&(this._fontSize=N,this._textBoxWidthInPixels=void 0,this._redrawIfAuto())},O.fontFamily.get=function(){return this._fontFamily},O.fontFamily.set=function(N){this._fontFamily!==N&&(this._fontFamily=N,this._textBoxWidthInPixels=void 0,this._redrawIfAuto())},O.font.get=function(){return N=this.fontStyle,L=this.fontVariant,M=this.fontWeight,C=this.fontSize,D=this.fontFamily,[N,L,M,C+"px",D].join(" ");var N,L,M,C,D},O.textAlign.get=function(){return this._textAlign},O.textAlign.set=function(N){this._textAlign!==N&&(this._textAlign=N,this._redrawIfAuto())},O.lineHeight.get=function(){return this._lineHeight},O.lineHeight.set=function(N){this._lineHeight!==N&&(this._lineHeight=N,this._redrawIfAuto())},O.lineHeightInPixels.get=function(){return this.fontSize*this.lineHeight},O.textBoxWidthInPixels.get=function(){return void 0===this._textBoxWidthInPixels&&(this._textBoxWidthInPixels=T(this.lines,this.font)),this._textBoxWidthInPixels},O.textBoxHeight.get=function(){return this.lineHeight*(this.linesCount-1)+1},O.textBoxHeightInPixels.get=function(){return this.fontSize*this.textBoxHeight},O.padding.get=function(){return this._padding},O.padding.set=function(N){this._padding!==N&&(this._padding=N,this._redrawIfAuto())},O.paddingInPixels.get=function(){return this.fontSize*this.padding},O.paddingBoxWidthInPixels.get=function(){return this.textBoxWidthInPixels+2*this.paddingInPixels},O.paddingBoxHeight.get=function(){return this.textBoxHeight+2*this.padding},O.paddingBoxHeightInPixels.get=function(){return this.textBoxHeightInPixels+2*this.paddingInPixels},O.aspect.get=function(){return this.image.width&&this.image.height?this.image.width/this.image.height:1},Object.defineProperties(S.prototype,O),S}(m.Texture)});!function(m,E){"object"==typeof exports&&"undefined"!=typeof module?E(require("three"),require("three.texttexture")):"function"==typeof define&&define.amd?define(["three","three.texttexture"],E):E(m.THREE)}(this,function(m){"use strict";(m=m&&m.hasOwnProperty("default")?m.default:m).TextSprite=function(E){function T(S){void 0===S&&(S={});var O=S.textSize;void 0===O&&(O=1);var N=S.redrawInterval;void 0===N&&(N=1);var L=S.maxFontSize;void 0===L&&(L=1/0);var M=S.material;void 0===M&&(M={});var C=S.texture;void 0===C&&(C={}),E.call(this,new m.SpriteMaterial(Object.assign({},M,{map:new m.TextTexture(C)}))),this.textSize=O,this.redrawInterval=N,this.maxFontSize=L,this.lastRedraw=0}E&&(T.__proto__=E),T.prototype=Object.create(E&&E.prototype),T.prototype.constructor=T;var A={isTextSprite:{configurable:!0}};return A.isTextSprite.get=function(){return!0},T.prototype.onBeforeRender=function(S,O,N){this.redraw(S,N)},T.prototype.updateScale=function(){this.scale.set(this.material.map.aspect,1,1).multiplyScalar(this.textSize*this.material.map.paddingBoxHeight)},T.prototype.updateMatrix=function(){for(var S=[],O=arguments.length;O--;)S[O]=arguments[O];return this.updateScale(),E.prototype.updateMatrix.apply(this,S)},T.prototype.computeOptimalFontSize=function(S,O){if(S.domElement.width&&S.domElement.height&&this.material.map.lines.length){var N=this.getWorldPosition().distanceTo(O.getWorldPosition());if(N){var L=this.getWorldScale().y*S.domElement.height/N;if(L)return Math.round(L/this.material.map.paddingBoxHeight)}}return 0},T.prototype.redraw=function(S,O){var N=this;this.lastRedraw+this.redrawInterval<Date.now()&&(this.redrawInterval?setTimeout(function(){N.redrawNow(S,O)},1):this.redrawNow(S,O))},T.prototype.redrawNow=function(S,O){this.updateScale();var N=this.computeOptimalFontSize(S,O);N=m.Math.ceilPowerOfTwo(N),N=Math.min(N,this.maxFontSize),this.material.map.fontSize=N,this.material.map.autoRedraw||this.material.map.redraw(),this.lastRedraw=Date.now()},T.prototype.dispose=function(){this.material.map.dispose(),this.material.dispose()},Object.defineProperties(T.prototype,A),T}(m.Sprite)});(function(m,E){"function"==typeof define&&define.amd?define([],E):"object"==typeof exports?module.exports=E():m.X2JS=E()})(this,function(){return function(m){"use strict";function A($){var ee=$.localName;return null==ee&&(ee=$.baseName),(null==ee||""==ee)&&(ee=$.nodeName),ee}function S($){return $.prefix}function O($){return"string"==typeof $?$.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):$}function L($,ee,te,ne){for(var oe,ie=0;ie<$.length;ie++)if(oe=$[ie],"string"==typeof oe){if(oe==ne)break;}else if(oe instanceof RegExp){if(oe.test(ne))break;}else if("function"==typeof oe&&oe(ee,te,ne))break;return ie!=$.length}function M($,ee,te){switch(m.arrayAccessForm){case"property":$[ee+"_asArray"]=$[ee]instanceof Array?$[ee]:[$[ee]];}!($[ee]instanceof Array)&&0<m.arrayAccessFormPaths.length&&L(m.arrayAccessFormPaths,$,ee,te)&&($[ee]=[$[ee]])}function C($){var ee=$.split(/[-T:+Z]/g),te=new Date(ee[0],ee[1]-1,ee[2]),ne=ee[5].split(".");if(te.setHours(ee[3],ee[4],ne[0]),1<ne.length&&te.setMilliseconds(ne[1]),ee[6]&&ee[7]){var ie=60*ee[6]+ +ee[7],oe=/\d\d-\d\d:\d\d$/.test($)?"-":"+";ie=0+("-"==oe?-1*ie:ie),te.setMinutes(te.getMinutes()-ie-te.getTimezoneOffset())}else-1!==$.indexOf("Z",$.length-1)&&(te=new Date(Date.UTC(te.getFullYear(),te.getMonth(),te.getDate(),te.getHours(),te.getMinutes(),te.getSeconds(),te.getMilliseconds())));return te}function D($,ee,te){if(0<m.datetimeAccessFormPaths.length){var ne=te.split(".#")[0];return L(m.datetimeAccessFormPaths,$,ee,ne)?C($):$}return $}function z($,ee,te,ne){return ee==J.ELEMENT_NODE&&0<m.xmlElementsFilter.length?L(m.xmlElementsFilter,$,te,ne):!0}function F($,ee){if($.nodeType==J.DOCUMENT_NODE){for(var oe,te={},ne=$.childNodes,ie=0;ie<ne.length;ie++)if(oe=ne.item(ie),oe.nodeType==J.ELEMENT_NODE){var ae=A(oe);te[ae]=F(oe,ae)}return te}if($.nodeType==J.ELEMENT_NODE){for(var te={__cnt:0},ne=$.childNodes,ie=0;ie<ne.length;ie++){var oe=ne.item(ie),ae=A(oe);if(oe.nodeType!=J.COMMENT_NODE){var re=ee+"."+ae;z(te,oe.nodeType,ae,re)&&(te.__cnt++,null==te[ae]?(te[ae]=F(oe,re),M(te,ae,re)):(null!=te[ae]&&!(te[ae]instanceof Array)&&(te[ae]=[te[ae]],M(te,ae,re)),te[ae][te[ae].length]=F(oe,re)))}}for(var le,se=0;se<$.attributes.length;se++)le=$.attributes.item(se),te.__cnt++,te[m.attributePrefix+le.name]=le.value;var pe=S($);return null!=pe&&""!=pe&&(te.__cnt++,te.__prefix=pe),null!=te["#text"]&&(te.__text=te["#text"],te.__text instanceof Array&&(te.__text=te.__text.join("\n")),m.stripWhitespaces&&(te.__text=te.__text.trim()),delete te["#text"],"property"==m.arrayAccessForm&&delete te["#text_asArray"],te.__text=D(te.__text,ae,ee+"."+ae)),null!=te["#cdata-section"]&&(te.__cdata=te["#cdata-section"],delete te["#cdata-section"],"property"==m.arrayAccessForm&&delete te["#cdata-section_asArray"]),0==te.__cnt&&"text"==m.emptyNodeForm?te="":1==te.__cnt&&null!=te.__text?te=te.__text:1!=te.__cnt||null==te.__cdata||m.keepCData?1<te.__cnt&&null!=te.__text&&m.skipEmptyTextNodesForObj&&(m.stripWhitespaces&&""==te.__text||""==te.__text.trim())&&delete te.__text:te=te.__cdata,delete te.__cnt,m.enableToStringFunc&&(null!=te.__text||null!=te.__cdata)&&(te.toString=function(){return(null==this.__text?"":this.__text)+(null==this.__cdata?"":this.__cdata)}),te}return $.nodeType==J.TEXT_NODE||$.nodeType==J.CDATA_SECTION_NODE?$.nodeValue:void 0}function R($,ee,te,ne){var ie="<"+(null!=$&&null!=$.__prefix?$.__prefix+":":"")+ee;if(null!=te)for(var oe=0;oe<te.length;oe++){var ae=te[oe],re=$[ae];m.escapeMode&&(re=O(re)),ie+=" "+ae.substr(m.attributePrefix.length)+"=",ie+=m.useDoubleQuotes?"\""+re+"\"":"'"+re+"'"}return ie+=ne?"/>":">",ie}function H($,ee){return"</"+(null==$.__prefix?"":$.__prefix+":")+ee+">"}function W($,ee){return-1!==$.indexOf(ee,$.length-ee.length)}function V($,ee){return"property"==m.arrayAccessForm&&W(ee.toString(),"_asArray")||0==ee.toString().indexOf(m.attributePrefix)||0==ee.toString().indexOf("__")||$[ee]instanceof Function}function U($){var ee=0;if($ instanceof Object)for(var te in $)V($,te)||ee++;return ee}function G($,ee,te){return 0==m.jsonPropertiesFilter.length||""==te||L(m.jsonPropertiesFilter,$,ee,te)}function k($){var ee=[];if($ instanceof Object)for(var te in $)-1==te.toString().indexOf("__")&&0==te.toString().indexOf(m.attributePrefix)&&ee.push(te);return ee}function X($){var ee="";return null!=$.__cdata&&(ee+="<![CDATA["+$.__cdata+"]]>"),null!=$.__text&&(m.escapeMode?ee+=O($.__text):ee+=$.__text),ee}function Y($){var ee="";return $ instanceof Object?ee+=X($):null!=$&&(m.escapeMode?ee+=O($):ee+=$),ee}function Z($,ee){return""===$?ee:$+"."+ee}function q($,ee,te,ne){var ie="";if(0==$.length)ie+=R($,ee,te,!0);else for(var oe=0;oe<$.length;oe++)ie+=R($[oe],ee,k($[oe]),!1),ie+=K($[oe],Z(ne,ee)),ie+=H($[oe],ee);return ie}function K($,ee){var te="",ne=U($);if(0<ne)for(var ie in $)if(!V($,ie)&&(""==ee||G($,ie,Z(ee,ie)))){var oe=$[ie],ae=k(oe);if(null==oe||void 0==oe)te+=R(oe,ie,ae,!0);else if(!(oe instanceof Object))te+=R(oe,ie,ae,!1),te+=Y(oe),te+=H(oe,ie);else if(oe instanceof Array)te+=q(oe,ie,ae,ee);else if(oe instanceof Date)te+=R(oe,ie,ae,!1),te+=oe.toISOString(),te+=H(oe,ie);else{var re=U(oe);0<re||null!=oe.__text||null!=oe.__cdata?(te+=R(oe,ie,ae,!1),te+=K(oe,Z(ee,ie)),te+=H(oe,ie)):te+=R(oe,ie,ae,!0)}}return te+=Y($),te}m=m||{},function(){m.escapeMode===void 0&&(m.escapeMode=!0),m.attributePrefix=m.attributePrefix||"_",m.arrayAccessForm=m.arrayAccessForm||"none",m.emptyNodeForm=m.emptyNodeForm||"text",m.enableToStringFunc===void 0&&(m.enableToStringFunc=!0),m.arrayAccessFormPaths=m.arrayAccessFormPaths||[],m.skipEmptyTextNodesForObj===void 0&&(m.skipEmptyTextNodesForObj=!0),m.stripWhitespaces===void 0&&(m.stripWhitespaces=!0),m.datetimeAccessFormPaths=m.datetimeAccessFormPaths||[],m.useDoubleQuotes===void 0&&(m.useDoubleQuotes=!1),m.xmlElementsFilter=m.xmlElementsFilter||[],m.jsonPropertiesFilter=m.jsonPropertiesFilter||[],m.keepCData===void 0&&(m.keepCData=!1)}(),function(){}();var J={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function($){var ee=window.ActiveXObject||"ActiveXObject"in window;if($===void 0)return null;var te;if(window.DOMParser){var ne=new window.DOMParser,ie=null;if(!ee)try{ie=ne.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(oe){ie=null}try{te=ne.parseFromString($,"text/xml"),null!=ie&&0<te.getElementsByTagNameNS(ie,"parsererror").length&&(te=null)}catch(oe){te=null}}else 0==$.indexOf("<?")&&($=$.substr($.indexOf("?>")+2)),te=new ActiveXObject("Microsoft.XMLDOM"),te.async="false",te.loadXML($);return te},this.asArray=function($){return void 0===$||null==$?[]:$ instanceof Array?$:[$]},this.toXmlDateTime=function($){return $ instanceof Date?$.toISOString():"number"==typeof $?new Date($).toISOString():null},this.asDateTime=function($){return"string"==typeof $?C($):$},this.xml2json=function($){return F($)},this.xml_str2json=function($){var ee=this.parseXmlString($);return null==ee?null:this.xml2json(ee)},this.json2xml_str=function($){return K($,"")},this.json2xml=function($){var ee=this.json2xml_str($);return this.parseXmlString(ee)},this.getVersion=function(){return"1.2.0"}}}),THREE.LineSegmentsGeometry=function(){THREE.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry";var m=new THREE.BufferGeometry;this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.addAttribute("position",new THREE.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.addAttribute("uv",new THREE.Float32BufferAttribute([0,1,1,1,0,0.5,1,0.5,0,0.5,1,0.5,0,0,1,0],2))},THREE.LineSegmentsGeometry.prototype=Object.assign(Object.create(THREE.InstancedBufferGeometry.prototype),{constructor:THREE.LineSegmentsGeometry,isLineSegmentsGeometry:!0,applyMatrix:function(m){var E=this.attributes.instanceStart,T=this.attributes.instanceEnd;return void 0!==E&&(m.applyToBufferAttribute(E),m.applyToBufferAttribute(T),E.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(m){var E;m instanceof Float32Array?E=m:Array.isArray(m)&&(E=new Float32Array(m));var T=new THREE.InstancedInterleavedBuffer(E,6,1);return this.addAttribute("instanceStart",new THREE.InterleavedBufferAttribute(T,3,0)),this.addAttribute("instanceEnd",new THREE.InterleavedBufferAttribute(T,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(m){var E;m instanceof Float32Array?E=m:Array.isArray(m)&&(E=new Float32Array(m));var T=new THREE.InstancedInterleavedBuffer(E,6,1);return this.addAttribute("instanceColorStart",new THREE.InterleavedBufferAttribute(T,3,0)),this.addAttribute("instanceColorEnd",new THREE.InterleavedBufferAttribute(T,3,3)),this},fromWireframeGeometry:function(m){return this.setPositions(m.attributes.position.array),this},fromEdgesGeometry:function(m){return this.setPositions(m.attributes.position.array),this},fromMesh:function(m){return this.fromWireframeGeometry(new THREE.WireframeGeometry(m.geometry)),this},fromLineSegements:function(m){var E=m.geometry;return E.isGeometry?this.setPositions(E.vertices):E.isBufferGeometry&&this.setPositions(E.position.array),this},computeBoundingBox:function(){var m=new THREE.Box3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var T=this.attributes.instanceStart,A=this.attributes.instanceEnd;T!==void 0&&A!==void 0&&(this.boundingBox.setFromBufferAttribute(T),m.setFromBufferAttribute(A),this.boundingBox.union(m))}}(),computeBoundingSphere:function(){var m=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),null===this.boundingBox&&this.computeBoundingBox();var T=this.attributes.instanceStart,A=this.attributes.instanceEnd;if(T!==void 0&&A!==void 0){var S=this.boundingSphere.center;this.boundingBox.getCenter(S);for(var O=0,N=0,L=T.count;N<L;N++)m.fromBufferAttribute(T,N),O=Math.max(O,S.distanceToSquared(m)),m.fromBufferAttribute(A,N),O=Math.max(O,S.distanceToSquared(m));this.boundingSphere.radius=Math.sqrt(O),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){},clone:function(){},copy:function(){return this}});THREE.LineGeometry=function(){THREE.LineSegmentsGeometry.call(this),this.type="LineGeometry"},THREE.LineGeometry.prototype=Object.assign(Object.create(THREE.LineSegmentsGeometry.prototype),{constructor:THREE.LineGeometry,isLineGeometry:!0,setPositions:function(m){for(var E=m.length-3,T=new Float32Array(2*E),A=0;A<E;A+=3)T[2*A]=m[A],T[2*A+1]=m[A+1],T[2*A+2]=m[A+2],T[2*A+3]=m[A+3],T[2*A+4]=m[A+4],T[2*A+5]=m[A+5];return THREE.LineSegmentsGeometry.prototype.setPositions.call(this,T),this},setColors:function(m){for(var E=m.length-3,T=new Float32Array(2*E),A=0;A<E;A+=3)T[2*A]=m[A],T[2*A+1]=m[A+1],T[2*A+2]=m[A+2],T[2*A+3]=m[A+3],T[2*A+4]=m[A+4],T[2*A+5]=m[A+5];return THREE.LineSegmentsGeometry.prototype.setColors.call(this,T),this},fromLine:function(m){var E=m.geometry;return E.isGeometry?this.setPositions(E.vertices):E.isBufferGeometry&&this.setPositions(E.position.array),this},copy:function(){return this}});THREE.WireframeGeometry2=function(m){THREE.LineSegmentsGeometry.call(this),this.type="WireframeGeometry2",this.fromWireframeGeometry(new THREE.WireframeGeometry(m))},THREE.WireframeGeometry2.prototype=Object.assign(Object.create(THREE.LineSegmentsGeometry.prototype),{constructor:THREE.WireframeGeometry2,isWireframeGeometry2:!0,copy:function(){return this}});THREE.UniformsLib.line={linewidth:{value:1},resolution:{value:new THREE.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},THREE.ShaderLib.line={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			#include <logdepthbuf_vertex>

			#include <worldpos_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < 0.5 || vUv.y > 0.5 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( vUv.y < 0.5 || vUv.y > 0.5 ) {

				float a = vUv.x - 0.5;
				float b = vUv.y - 0.5;
				float len2 = a * a + b * b;

				if ( len2 > 0.25 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <premultiplied_alpha_fragment>
			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>

		}
		`},THREE.LineMaterial=function(m){THREE.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:THREE.UniformsUtils.clone(THREE.ShaderLib.line.uniforms),vertexShader:THREE.ShaderLib.line.vertexShader,fragmentShader:THREE.ShaderLib.line.fragmentShader}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(E){this.uniforms.diffuse.value=E}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(E){this.uniforms.linewidth.value=E}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(E){this.uniforms.dashScale.value=E}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(E){this.uniforms.dashSize.value=E}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(E){this.uniforms.gapSize.value=E}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(E){this.uniforms.resolution.value.copy(E)}}}),this.setValues(m)},THREE.LineMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.LineMaterial.prototype.constructor=THREE.LineMaterial,THREE.LineMaterial.prototype.isLineMaterial=!0,THREE.LineMaterial.prototype.copy=function(m){return THREE.ShaderMaterial.prototype.copy.call(this,m),this.color.copy(m.color),this.linewidth=m.linewidth,this.resolution=m.resolution,this};THREE.LineSegments2=function(m,E){THREE.Mesh.call(this),this.type="LineSegments2",this.geometry=m===void 0?new THREE.LineSegmentsGeometry:m,this.material=E===void 0?new THREE.LineMaterial({color:16777215*Math.random()}):E},THREE.LineSegments2.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.LineSegments2,isLineSegments2:!0,computeLineDistances:function(){var m=new THREE.Vector3,E=new THREE.Vector3;return function(){for(var A=this.geometry,S=A.attributes.instanceStart,O=A.attributes.instanceEnd,N=new Float32Array(2*S.data.count),L=0,M=0,C=S.data.count;L<C;L++,M+=2)m.fromBufferAttribute(S,L),E.fromBufferAttribute(O,L),N[M]=0==M?0:N[M-1],N[M+1]=N[M]+m.distanceTo(E);var D=new THREE.InstancedInterleavedBuffer(N,2,1);return A.addAttribute("instanceDistanceStart",new THREE.InterleavedBufferAttribute(D,1,0)),A.addAttribute("instanceDistanceEnd",new THREE.InterleavedBufferAttribute(D,1,1)),this}}(),copy:function(){return this}});THREE.Line2=function(m,E){THREE.LineSegments2.call(this),this.type="Line2",this.geometry=m===void 0?new THREE.LineGeometry:m,this.material=E===void 0?new THREE.LineMaterial({color:16777215*Math.random()}):E},THREE.Line2.prototype=Object.assign(Object.create(THREE.LineSegments2.prototype),{constructor:THREE.Line2,isLine2:!0,copy:function(){return this}});THREE.Wireframe=function(m,E){THREE.Mesh.call(this),this.type="Wireframe",this.geometry=m===void 0?new THREE.LineSegmentsGeometry:m,this.material=E===void 0?new THREE.LineMaterial({color:16777215*Math.random()}):E},THREE.Wireframe.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.Wireframe,isWireframe:!0,computeLineDistances:function(){var m=new THREE.Vector3,E=new THREE.Vector3;return function(){for(var A=this.geometry,S=A.attributes.instanceStart,O=A.attributes.instanceEnd,N=new Float32Array(2*S.data.count),L=0,M=0,C=S.data.count;L<C;L++,M+=2)m.fromBufferAttribute(S,L),E.fromBufferAttribute(O,L),N[M]=0==M?0:N[M-1],N[M+1]=N[M]+m.distanceTo(E);var D=new THREE.InstancedInterleavedBuffer(N,2,1);return A.addAttribute("instanceDistanceStart",new THREE.InterleavedBufferAttribute(D,1,0)),A.addAttribute("instanceDistanceEnd",new THREE.InterleavedBufferAttribute(D,1,1)),this}}(),copy:function(){return this}});